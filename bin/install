#!/usr/bin/env ruby

require 'fileutils'
require 'pathname'

class DotfileLinker
  def initialize(dotfiles_path)
    @dotfiles_path = Pathname.new(dotfiles_path)
    @base_path = @dotfiles_path.expand_path
  end

  def link(pointer_file, source_file)
    if File.exist?("#{@base_path}/#{source_file}")
      FileUtils.ln_s "#{@base_path}/#{source_file}", Pathname.new("~/#{pointer_file}").expand_path, force: true
      puts "Finished linking ~/#{pointer_file} to ~/#{source_file}"
    else
      puts "File, #{@base_path}/#{source_file}, doesn't exist"
    end
  end
end

linker = DotfileLinker.new("~/.dotfiles")

linker.link(".gitconfig", "git/gitconfig")
linker.line(".gitignore", "git/gitignore")
linker.link(".zshrc", "zsh/zshrc")

# Vim
#linker.link(".nvimrc", "nvim/nvimrc")

